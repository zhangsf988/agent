spring:
  application:
    name: agent
  ai:
    openai:
      api-key: ${OPENAI_API_KEY}
      base-url: https://dashscope.aliyuncs.com/compatible-mode/v1
      chat:
        options:
          model: qwen-max-latest
          temperature: 0.7
      embedding:
        options:
          model: text-embedding-v4
        base-url: https://dashscope.aliyuncs.com/compatible-mode/v1
    vectorstore:
      pinecone:
        api-key: ${PINECONE_API_KEY}
        index-name: spring-ai
        store:
          topK: 3  # 默认检索 Top 3 相关文档
          similarityThreshold: 0.7  # 相似度阈值（过滤低相关文档）
    chat-memory:
      jdbc:
        initialize-schema: always  # 总是初始化数据库表结构

  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    url: jdbc:mysql://localhost:3306/agent?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: root  # 你的 MySQL 用户名
    password: root  # 你的 MySQL 密码
    driver-class-name: com.mysql.cj.jdbc.Driver
    jpa:
      hibernate:
        ddl-auto: update  # 自动创建/更新 MySQL 表（开发环境用，生产用 validate）
      show-sql: true
      properties:
        hibernate:
          format_sql: true
  sql:
    init:
      mode: always
      platform: mysql
      schema-locations: classpath:org/springframework/ai/chat/memory/repository/jdbc/schema-mysql.sql